(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[208],{63:(e,t,a)=>{"use strict";var r=a(7260);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSelectedLayoutSegments")&&a.d(t,{useSelectedLayoutSegments:function(){return r.useSelectedLayoutSegments}})},4916:(e,t,a)=>{"use strict";a.d(t,{S:()=>l});var r=a(5155);a(2115);var n=a(82),s=a(5917),i=a(5016);function l(e){let{className:t,...a}=e;return(0,r.jsx)(n.bL,{"data-slot":"checkbox",className:(0,i.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,r.jsx)(n.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,r.jsx)(s.A,{className:"size-3.5"})})})}},5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(2821),n=a(5889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}},6170:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var r=a(5155);a(2115);var n=a(5016);function s(e){let{className:t,type:a,...s}=e;return(0,r.jsx)("input",{type:a,"data-slot":"input",className:(0,n.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},6633:(e,t,a)=>{"use strict";a.d(t,{Table:()=>s,TableBody:()=>l,TableCell:()=>c,TableHead:()=>d,TableHeader:()=>i,TableRow:()=>o});var r=a(5155);a(2115);var n=a(5016);function s(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,r.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...a})})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var r=a(5155);a(2115);var n=a(2467),s=a(3101),i=a(5016);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:s,asChild:o=!1,...d}=e,c=o?n.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:s,className:t})),...d})}},7450:(e,t,a)=>{"use strict";a.d(t,{AM:()=>i,Wv:()=>l,hl:()=>o});var r=a(5155);a(2115);var n=a(2286),s=a(5016);function i(e){let{...t}=e;return(0,r.jsx)(n.bL,{"data-slot":"popover",...t})}function l(e){let{...t}=e;return(0,r.jsx)(n.l9,{"data-slot":"popover-trigger",...t})}function o(e){let{className:t,align:a="center",sideOffset:i=4,...l}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsx)(n.UC,{"data-slot":"popover-content",align:a,sideOffset:i,className:(0,s.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}},7812:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var r=a(5155);a(2115);var n=a(2467),s=a(3101),i=a(5016);let l=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:s=!1,...o}=e,d=s?n.DX:"span";return(0,r.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(l({variant:a}),t),...o})}},8066:(e,t,a)=>{"use strict";a.d(t,{ProcedureLibrary:()=>h});var r=a(5155),n=a(2115),s=a(2619),i=a.n(s),l=a(63),o=a(7003),d=a(7812),c=a(6170),u=a(7450),m=a(4916),x=a(6633);function h(e){var t;let{initialItems:a}=e,s=n.useMemo(()=>new URLSearchParams(window.location.search),[]),i=s.get("view")||localStorage.getItem("proc_view")||"cards",l=null!=(t=s.get("q"))?t:"",[d,m]=n.useState(l),[x,h]=n.useState(i),[b,w]=n.useState(!1),[N,k]=n.useState(new Set(y(s.get("type")))),[_,S]=n.useState(new Set(y(s.get("region")))),[C,T]=n.useState(new Set(y(s.get("guide")))),[z,E]=n.useState(new Set(y(s.get("ev"))));n.useEffect(()=>{let e=window.matchMedia("(min-width: 1024px)"),t=()=>w(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),n.useEffect(()=>{let e=new URLSearchParams;d&&e.set("q",d),N.size&&e.set("type",[...N].join(",")),_.size&&e.set("region",[..._].join(",")),C.size&&e.set("guide",[...C].join(",")),z.size&&e.set("ev",[...z].join(",")),e.set("view",x);{let t="".concat(location.pathname,"?").concat(e.toString());window.history.replaceState(null,"",t),localStorage.setItem("proc_view",x)}},[d,N,_,C,z,x]);let P=n.useMemo(()=>{let e=e=>[...new Set(e.filter(Boolean))];return{types:e(a.map(e=>e.condition_type)),regions:e(a.map(e=>e.region)),guides:e(a.map(e=>e.guidance)),evs:e(a.map(e=>e.evidence_level))}},[a]),R=n.useMemo(()=>{let e=e=>e.toLowerCase().normalize("NFKD"),t=e(d).split(/\s+/).filter(Boolean);return a.filter(a=>{var r,n,s,i,l,o,d,c,u,m;if(N.size&&!N.has(null!=(r=a.condition_type)?r:"")||_.size&&!_.has(null!=(n=a.region)?n:"")||C.size&&!C.has(null!=(s=a.guidance)?s:"")||z.size&&!z.has(null!=(i=a.evidence_level)?i:""))return!1;if(!t.length)return!0;let x=e([a.title,null!=(l=a.region)?l:"",null!=(o=a.condition_type)?o:"",null!=(d=a.guidance)?d:"",null!=(c=a.evidence_level)?c:"",...null!=(m=(null!=(u=a.key_muscles)?u:[]).map(e=>e.name))?m:[]].join(" "));return t.every(e=>x.includes(e))})},[a,d,N,_,C,z]),L=n.useMemo(()=>{let e=e=>e.reduce((e,t)=>{var a;return t&&(e[t]=(null!=(a=e[t])?a:0)+1),e},{});return{type:e(R.map(e=>e.condition_type)),region:e(R.map(e=>e.region)),guide:e(R.map(e=>e.guidance)),ev:e(R.map(e=>e.evidence_level))}},[R]);return(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,r.jsxs)("header",{className:"space-y-1",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"Procedure Library"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Reference-only procedures. Toggle between views."})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex w-full max-w-2xl items-center gap-2",children:[(0,r.jsx)(c.p,{"aria-label":"Search procedures",placeholder:"Search procedures, indications, or region…",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Escape"===e.key&&m("")}}),(0,r.jsx)(o.$,{type:"button",variant:"outline",onClick:()=>w(e=>!e),children:"Filter ⚙"})]}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,r.jsx)(v,{view:x,setView:h}),(0,r.jsx)(o.$,{variant:"outline",onClick:function(){m(""),h("cards"),k(new Set),S(new Set),T(new Set),E(new Set)},children:"Reset"})]})]}),b&&(0,r.jsx)("div",{className:"rounded-2xl border p-3 lg:p-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)(f,{label:"Condition",options:P.types,selected:N,counts:L.type,onApply:e=>k(new Set(e))}),(0,r.jsx)(f,{label:"Region",options:P.regions,selected:_,counts:L.region,onApply:e=>S(new Set(e))}),(0,r.jsxs)(u.AM,{children:[(0,r.jsx)(u.Wv,{asChild:!0,children:(0,r.jsx)(o.$,{variant:"outline",className:"h-9",children:"More ▼"})}),(0,r.jsx)(u.hl,{className:"w-64 p-3",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"Guidance"}),(0,r.jsx)(j,{options:P.guides,selected:C,counts:L.guide,onChange:e=>T(new Set(e))}),(0,r.jsx)("div",{className:"text-sm font-medium mt-2",children:"Evidence"}),(0,r.jsx)(j,{options:P.evs,selected:z,counts:L.ev,onChange:e=>E(new Set(e))})]})})]})]})}),"cards"===x?(0,r.jsx)(g,{items:R}):(0,r.jsx)(p,{items:R})]})}function v(e){let{view:t,setView:a}=e;return(0,r.jsxs)("div",{className:"inline-flex rounded-lg border p-1",children:[(0,r.jsx)(o.$,{variant:"cards"===t?"default":"ghost",className:"h-8",onClick:()=>a("cards"),"aria-label":"Cards view",children:"Cards"}),(0,r.jsx)(o.$,{variant:"table"===t?"default":"ghost",className:"h-8",onClick:()=>a("table"),"aria-label":"Table view",children:"Table"})]})}function g(e){let{items:t}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4",children:t.length?t.map(e=>(0,r.jsx)(b,{p:e},e.id)):(0,r.jsx)(N,{})})}function p(e){let{items:t}=e;return(0,r.jsx)("div",{className:"rounded-2xl border overflow-x-auto",children:(0,r.jsxs)(x.Table,{children:[(0,r.jsx)(x.TableHeader,{className:"bg-muted/50",children:(0,r.jsxs)(x.TableRow,{children:[(0,r.jsx)(x.TableHead,{children:"Procedure"}),(0,r.jsx)(x.TableHead,{children:"Key Muscles"}),(0,r.jsx)(x.TableHead,{children:"Sites"}),(0,r.jsx)(x.TableHead,{children:"Total dose"}),(0,r.jsx)(x.TableHead,{children:"Guidance"}),(0,r.jsx)(x.TableHead,{children:"Evidence"}),(0,r.jsx)(x.TableHead,{children:"Region"})]})}),(0,r.jsx)(x.TableBody,{children:t.length?t.map(e=>{var t;return(0,r.jsxs)(x.TableRow,{children:[(0,r.jsx)(x.TableCell,{className:"font-medium",children:(0,r.jsx)(i(),{href:"/dashboard/library/procedures/".concat(e.slug),className:"hover:underline",children:e.title})}),(0,r.jsxs)(x.TableCell,{className:"max-w-[28ch] truncate",children:[(null!=(t=e.key_muscles)?t:[]).slice(0,4).map(e=>e.name).join(", ")||"—",e.total_muscle_count&&e.total_muscle_count>4?" +".concat(e.total_muscle_count-4,"…"):""]}),(0,r.jsx)(x.TableCell,{children:w(e.sites_min,e.sites_max)}),(0,r.jsx)(x.TableCell,{children:w(e.total_dose_min,e.total_dose_max," U")}),(0,r.jsx)(x.TableCell,{children:e.guidance||"—"}),(0,r.jsx)(x.TableCell,{children:e.evidence_level||"—"}),(0,r.jsx)(x.TableCell,{children:e.region||"—"})]},e.id)}):(0,r.jsx)(x.TableRow,{children:(0,r.jsx)(x.TableCell,{colSpan:7,children:(0,r.jsx)(N,{})})})})]})})}function b(e){var t;let{p:a}=e,s=(0,l.useRouter)(),o="/dashboard/library/procedures/".concat(a.slug),c=(null!=(t=a.key_muscles)?t:[])||[],u=a.total_muscle_count&&a.total_muscle_count>4?a.total_muscle_count-4:0;return(0,r.jsxs)("div",{role:"link",tabIndex:0,"aria-label":a.title,onClick:()=>s.push(o),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),s.push(o))},className:"group block cursor-pointer rounded-2xl border p-4 transition hover:border-primary/40 hover:shadow-md",children:[(0,r.jsx)("div",{className:"text-base font-semibold",children:a.title}),(0,r.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:[a.region||"—",a.guidance||"—",a.evidence_level||"—"].join(" • ")}),(0,r.jsxs)("div",{className:"mt-2 text-sm",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:"Key muscles: "}),c.slice(0,4).map((e,t)=>(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(i(),{href:"/dashboard/library/muscles/".concat(e.slug),className:"hover:underline",onClick:e=>e.stopPropagation(),onKeyDown:e=>e.stopPropagation(),children:e.name}),t<Math.min(c.length,4)-1?", ":""]},e.slug)),u?(0,r.jsxs)("span",{className:"text-muted-foreground",children:[" +",u," more"]}):null]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-muted-foreground",children:["Sites: ",w(a.sites_min,a.sites_max)," • Total dose: ",w(a.total_dose_min,a.total_dose_max," U")]}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[a.evidence_level?(0,r.jsxs)(d.E,{className:"rounded-full",children:["Evidence ",a.evidence_level]}):null,a.region?(0,r.jsx)(d.E,{variant:"secondary",className:"rounded-full",children:a.region}):null]})]})}function f(e){let{label:t,options:a,selected:s,counts:i,onApply:l}=e,[d,c]=n.useState(!1),[m,x]=n.useState(new Set(s));return n.useEffect(()=>{d&&x(new Set(s))},[d,s]),(0,r.jsxs)(u.AM,{open:d,onOpenChange:c,children:[(0,r.jsx)(u.Wv,{asChild:!0,children:(0,r.jsxs)(o.$,{variant:"outline",className:"h-9",children:[t," ▼"]})}),(0,r.jsxs)(u.hl,{className:"w-64 p-3",children:[(0,r.jsx)(j,{options:a,selected:m,counts:i,onChange:x,onItemToggle:e=>{let t=new Set(m);t.has(e)?t.delete(e):t.add(e),x(t)}}),(0,r.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,r.jsx)(o.$,{size:"sm",className:"h-8",onClick:()=>{l(new Set(m)),c(!1)},children:"Apply"}),(0,r.jsx)(o.$,{size:"sm",variant:"outline",className:"h-8",onClick:()=>{x(new Set),l(new Set),c(!1)},children:"Clear"})]})]})]})}function j(e){let{options:t,selected:a,counts:n,onChange:s,onItemToggle:i}=e;return(0,r.jsx)("div",{className:"max-h-60 overflow-auto pr-1",children:t.length?t.map(e=>(0,r.jsxs)("label",{className:"flex cursor-pointer select-none items-center gap-2 rounded-md px-2 py-1.5 hover:bg-muted/60",children:[(0,r.jsx)(m.S,{checked:a.has(e),onCheckedChange:()=>(e=>{let t=new Set(a);t.has(e)?t.delete(e):t.add(e),s(t),null==i||i(e)})(e),"aria-label":e}),(0,r.jsx)("span",{className:"text-sm flex-1",children:e}),n&&"number"==typeof n[e]?(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:n[e]}):null]},e)):(0,r.jsx)("div",{className:"px-2 py-1 text-sm text-muted-foreground",children:"No options"})})}function w(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null==e&&null==t?"—":null!=e&&null!=t?"".concat(e,"–").concat(t).concat(a):"".concat(null!=e?e:t).concat(a)}function y(e){return e?e.split(",").map(e=>e.trim()).filter(Boolean):[]}function N(){return(0,r.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-2 py-10 text-center",children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:"No matches. Try clearing filters or broadening your search."})})}},9507:(e,t,a)=>{Promise.resolve().then(a.bind(a,8066))}},e=>{e.O(0,[619,909,476,609,441,255,358],()=>e(e.s=9507)),_N_E=e.O()}]);