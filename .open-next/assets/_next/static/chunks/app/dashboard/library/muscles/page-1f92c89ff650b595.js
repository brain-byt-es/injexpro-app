(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50],{798:(e,t,a)=>{"use strict";a.d(t,{MuscleLibrary:()=>x});var n=a(5155),r=a(2115),s=a(2619),i=a.n(s),l=a(7003),o=a(7812),d=a(6170),c=a(7450),u=a(4916),h=a(6633);function x(e){var t;let{initialItems:a}=e,s=r.useMemo(()=>new URLSearchParams(window.location.search),[]),o=s.get("view")||localStorage.getItem("muscle_view")||"cards",x=null!=(t=s.get("q"))?t:"",[b,j]=r.useState(x),[w,N]=r.useState(o),[y,k]=r.useState(!1),[S,_]=r.useState(new Set(p(s.get("region")))),[C,T]=r.useState(new Set(p(s.get("function")))),[z,E]=r.useState(new Set(p(s.get("ind")))),[M,L]=r.useState("true"===s.get("us"));r.useEffect(()=>{let e=window.matchMedia("(min-width: 1024px)"),t=()=>k(e.matches);return t(),e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]),r.useEffect(()=>{let e=new URLSearchParams;b&&e.set("q",b),S.size&&e.set("region",[...S].join(",")),C.size&&e.set("function",[...C].join(",")),z.size&&e.set("ind",[...z].join(",")),M&&e.set("us","true"),e.set("view",w);{let t="".concat(location.pathname,"?").concat(e.toString());window.history.replaceState(null,"",t),localStorage.setItem("muscle_view",w)}},[b,S,C,z,M,w]);let $=r.useMemo(()=>{let e=e=>[...new Set(e.filter(Boolean))];return{regions:e(a.map(e=>e.anatomical_region||"")),functions:e(a.map(e=>e.function_short||"").filter(Boolean)),indications:e(a.flatMap(e=>{var t;return null!=(t=e.indications)?t:[]}))}},[a]),A=r.useMemo(()=>{let e=e=>e.toLowerCase().normalize("NFKD"),t=e(b).split(/\s+/).filter(Boolean);return a.filter(a=>{var n,r,s,i,l,o,d,c;if(S.size&&!S.has(null!=(n=a.anatomical_region)?n:"")||C.size&&!C.has((a.function_short||"").trim()))return!1;if(z.size){let e=new Set(null!=(r=a.indications)?r:[]);if(![...z].some(t=>e.has(t)))return!1}if(M&&!a.has_ultrasound_window)return!1;if(!t.length)return!0;let u=e([a.name,null!=(s=a.abbr)?s:"",null!=(i=a.anatomical_region)?i:"",null!=(l=a.function_short)?l:"",null!=(o=a.innervation_nerve)?o:"",null!=(d=a.innervation_root)?d:"",...null!=(c=a.indications)?c:[]].join(" "));return t.every(e=>u.includes(e))})},[a,b,S,C,z,M]),H=r.useMemo(()=>{let e=e=>e.reduce((e,t)=>{var a;if(!t)return e;let n=String(t);return e[n]=(null!=(a=e[n])?a:0)+1,e},{});return{regions:e(A.map(e=>e.anatomical_region)),functions:e(A.map(e=>e.function_short)),indications:e(A.flatMap(e=>{var t;return null!=(t=e.indications)?t:[]})),us:A.filter(e=>e.has_ultrasound_window).length}},[A]);return(0,n.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-6 md:p-6",children:[(0,n.jsxs)("header",{className:"space-y-1",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Muscle Library"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"Search and filter muscles. Toggle between cards and table."})]}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsxs)("div",{className:"flex w-full max-w-2xl items-center gap-2",children:[(0,n.jsx)(d.p,{"aria-label":"Search muscles",placeholder:"Search muscles or indications…",value:b,onChange:e=>j(e.target.value),onKeyDown:e=>{"Escape"===e.key&&j("")}}),(0,n.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>k(e=>!e),children:"Filter ⚙"})]}),(0,n.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,n.jsx)(m,{view:w,setView:N}),(0,n.jsx)(l.$,{variant:"outline",onClick:function(){j(""),N("cards"),_(new Set),T(new Set),E(new Set),L(!1)},children:"Reset"})]})]}),y&&(0,n.jsx)("div",{className:"rounded-2xl border p-3 lg:p-4",children:(0,n.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,n.jsx)(f,{label:"Region",options:$.regions,selected:S,counts:H.regions,onApply:e=>_(new Set(e))}),(0,n.jsx)(f,{label:"Function",options:$.functions,selected:C,counts:H.functions,onApply:e=>T(new Set(e))}),(0,n.jsx)(f,{label:"Indication",options:$.indications,selected:z,counts:H.indications,onApply:e=>E(new Set(e))}),(0,n.jsxs)(c.AM,{children:[(0,n.jsx)(c.Wv,{asChild:!0,children:(0,n.jsx)(l.$,{variant:"outline",className:"h-9",children:"More ▼"})}),(0,n.jsx)(c.hl,{className:"w-56 p-3",children:(0,n.jsxs)("label",{className:"flex cursor-pointer select-none items-center gap-2 rounded-md px-2 py-1.5 hover:bg-muted/60",children:[(0,n.jsx)(u.S,{checked:M,onCheckedChange:()=>L(e=>!e),"aria-label":"US window available"}),(0,n.jsx)("span",{className:"text-sm",children:"US window available"}),(0,n.jsx)("span",{className:"ml-auto text-xs text-muted-foreground",children:H.us})]})})]})]})}),"cards"===w?(0,n.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4",children:A.length?A.map(e=>(0,n.jsx)(v,{m:e},e.id)):(0,n.jsx)(g,{})}):(0,n.jsx)("div",{className:"rounded-2xl border overflow-x-auto",children:(0,n.jsxs)(h.Table,{children:[(0,n.jsx)(h.TableHeader,{className:"bg-muted/50",children:(0,n.jsxs)(h.TableRow,{children:[(0,n.jsx)(h.TableHead,{children:"Name"}),(0,n.jsx)(h.TableHead,{children:"Region"}),(0,n.jsx)(h.TableHead,{children:"Function"}),(0,n.jsx)(h.TableHead,{children:"Innervation"}),(0,n.jsx)(h.TableHead,{children:"Indications"}),(0,n.jsx)(h.TableHead,{children:"US"})]})}),(0,n.jsx)(h.TableBody,{children:A.length?A.map(e=>{var t;return(0,n.jsxs)(h.TableRow,{children:[(0,n.jsxs)(h.TableCell,{className:"font-medium",children:[(0,n.jsx)(i(),{href:"/dashboard/library/muscles/".concat(e.slug),className:"hover:underline",children:e.name}),e.abbr?(0,n.jsxs)("span",{className:"text-muted-foreground",children:[" (",e.abbr,")"]}):null]}),(0,n.jsx)(h.TableCell,{children:e.anatomical_region||"—"}),(0,n.jsx)(h.TableCell,{className:"max-w-[22ch] truncate",children:e.function_short||"—"}),(0,n.jsx)(h.TableCell,{className:"max-w-[22ch] truncate",children:[e.innervation_nerve,e.innervation_root].filter(Boolean).join(" ")||"—"}),(0,n.jsx)(h.TableCell,{className:"max-w-[24ch] truncate",children:(null!=(t=e.indications)?t:[]).slice(0,3).join(", ")||"—"}),(0,n.jsx)(h.TableCell,{children:e.has_ultrasound_window?"Yes":""})]},e.id)}):(0,n.jsx)(h.TableRow,{children:(0,n.jsx)(h.TableCell,{colSpan:6,children:(0,n.jsx)(g,{})})})})]})})]})}function m(e){let{view:t,setView:a}=e;return(0,n.jsxs)("div",{className:"inline-flex rounded-lg border p-1",children:[(0,n.jsx)(l.$,{variant:"cards"===t?"default":"ghost",className:"h-8",onClick:()=>a("cards"),"aria-label":"Cards view",children:"Cards"}),(0,n.jsx)(l.$,{variant:"table"===t?"default":"ghost",className:"h-8",onClick:()=>a("table"),"aria-label":"Table view",children:"Table"})]})}function f(e){let{label:t,options:a,selected:s,counts:i,onApply:o}=e,[d,u]=r.useState(!1),[h,x]=r.useState(new Set(s));return r.useEffect(()=>{d&&x(new Set(s))},[d,s]),(0,n.jsxs)(c.AM,{open:d,onOpenChange:u,children:[(0,n.jsx)(c.Wv,{asChild:!0,children:(0,n.jsxs)(l.$,{variant:"outline",className:"h-9",children:[t," ▼"]})}),(0,n.jsxs)(c.hl,{className:"w-64 p-3",children:[(0,n.jsx)(b,{options:a,selected:h,counts:i,onChange:x,onItemToggle:e=>{let t=new Set(h);t.has(e)?t.delete(e):t.add(e),x(t)}}),(0,n.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,n.jsx)(l.$,{size:"sm",className:"h-8",onClick:()=>{o(new Set(h)),u(!1)},children:"Apply"}),(0,n.jsx)(l.$,{size:"sm",variant:"outline",className:"h-8",onClick:()=>{x(new Set),o(new Set),u(!1)},children:"Clear"})]})]})]})}function b(e){let{options:t,selected:a,counts:r,onChange:s,onItemToggle:i}=e;return(0,n.jsx)("div",{className:"max-h-60 overflow-auto pr-1",children:t.length?t.map(e=>(0,n.jsxs)("label",{className:"flex cursor-pointer select-none items-center gap-2 rounded-md px-2 py-1.5 hover:bg-muted/60",children:[(0,n.jsx)(u.S,{checked:a.has(e),onCheckedChange:()=>(e=>{let t=new Set(a);t.has(e)?t.delete(e):t.add(e),s(t),null==i||i(e)})(e),"aria-label":e}),(0,n.jsx)("span",{className:"text-sm flex-1",children:e}),r&&"number"==typeof r[e]?(0,n.jsx)("span",{className:"text-xs text-muted-foreground",children:r[e]}):null]},e)):(0,n.jsx)("div",{className:"px-2 py-1 text-sm text-muted-foreground",children:"No options"})})}function v(e){var t,a;let{m:r}=e;return(0,n.jsxs)(i(),{href:"/dashboard/library/muscles/".concat(r.slug),className:"group block rounded-2xl border p-4 transition hover:border-primary/40 hover:shadow-md",children:[(0,n.jsxs)("div",{className:"text-base font-semibold",children:[r.name," ",r.abbr?(0,n.jsxs)("span",{className:"font-normal text-muted-foreground",children:["(",r.abbr,")"]}):null]}),(0,n.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:[r.anatomical_region||"—",r.function_short||"—"].join(" • ")}),(0,n.jsx)("div",{className:"mt-1 text-sm text-muted-foreground",children:[r.innervation_nerve,r.innervation_root].filter(Boolean).join(" ")||"—"}),(0,n.jsx)("div",{className:"mt-2 flex flex-wrap gap-1",children:(null!=(t=r.indications)?t:[]).slice(0,2).map(e=>(0,n.jsx)(o.E,{variant:"outline",className:"rounded-full",children:e},e))}),(0,n.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[r.has_ultrasound_window?(0,n.jsx)(o.E,{className:"rounded-full",children:"US window"}):null,(null!=(a=r.safety_flags)?a:[]).slice(0,2).map(e=>(0,n.jsx)(o.E,{variant:"secondary",className:"rounded-full",children:e},e))]})]})}function g(){return(0,n.jsx)("div",{className:"flex w-full flex-col items-center justify-center gap-2 py-10 text-center",children:(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"No matches. Try clearing filters or broadening your search."})})}function p(e){return e?e.split(",").map(e=>e.trim()).filter(Boolean):[]}},1604:(e,t,a)=>{Promise.resolve().then(a.bind(a,798))},4916:(e,t,a)=>{"use strict";a.d(t,{S:()=>l});var n=a(5155);a(2115);var r=a(82),s=a(5917),i=a(5016);function l(e){let{className:t,...a}=e;return(0,n.jsx)(r.bL,{"data-slot":"checkbox",className:(0,i.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,n.jsx)(r.C1,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,n.jsx)(s.A,{className:"size-3.5"})})})}},5016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var n=a(2821),r=a(5889);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,n.$)(t))}},6170:(e,t,a)=>{"use strict";a.d(t,{p:()=>s});var n=a(5155);a(2115);var r=a(5016);function s(e){let{className:t,type:a,...s}=e;return(0,n.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...s})}},6633:(e,t,a)=>{"use strict";a.d(t,{Table:()=>s,TableBody:()=>l,TableCell:()=>c,TableHead:()=>d,TableHeader:()=>i,TableRow:()=>o});var n=a(5155);a(2115);var r=a(5016);function s(e){let{className:t,...a}=e;return(0,n.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,n.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",t),...a})})}function i(e){let{className:t,...a}=e;return(0,n.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",t),...a})}function l(e){let{className:t,...a}=e;return(0,n.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",t),...a})}function o(e){let{className:t,...a}=e;return(0,n.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function d(e){let{className:t,...a}=e;return(0,n.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function c(e){let{className:t,...a}=e;return(0,n.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},7003:(e,t,a)=>{"use strict";a.d(t,{$:()=>o});var n=a(5155);a(2115);var r=a(2467),s=a(3101),i=a(5016);let l=(0,s.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function o(e){let{className:t,variant:a,size:s,asChild:o=!1,...d}=e,c=o?r.DX:"button";return(0,n.jsx)(c,{"data-slot":"button",className:(0,i.cn)(l({variant:a,size:s,className:t})),...d})}},7450:(e,t,a)=>{"use strict";a.d(t,{AM:()=>i,Wv:()=>l,hl:()=>o});var n=a(5155);a(2115);var r=a(2286),s=a(5016);function i(e){let{...t}=e;return(0,n.jsx)(r.bL,{"data-slot":"popover",...t})}function l(e){let{...t}=e;return(0,n.jsx)(r.l9,{"data-slot":"popover-trigger",...t})}function o(e){let{className:t,align:a="center",sideOffset:i=4,...l}=e;return(0,n.jsx)(r.ZL,{children:(0,n.jsx)(r.UC,{"data-slot":"popover-content",align:a,sideOffset:i,className:(0,s.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...l})})}},7812:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var n=a(5155);a(2115);var r=a(2467),s=a(3101),i=a(5016);let l=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:s=!1,...o}=e,d=s?r.DX:"span";return(0,n.jsx)(d,{"data-slot":"badge",className:(0,i.cn)(l({variant:a}),t),...o})}}},e=>{e.O(0,[619,909,476,609,441,255,358],()=>e(e.s=1604)),_N_E=e.O()}]);